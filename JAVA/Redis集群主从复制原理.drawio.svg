<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1254px" height="632px" viewBox="-0.5 -0.5 1254 632" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-06-10T11:16:32.416Z&quot; agent=&quot;5.0 (Windows)&quot; etag=&quot;aek1WgAt40RTgAOAbIXC&quot; version=&quot;17.4.5&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;FTE5FVvRk2JemvjL1P14&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/?src=about#Hacttq%2Fdraw%2Fmain%2FJAVA%2FRedis%E9%9B%86%E7%BE%A4%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.drawio.svg"><defs/><g><path d="M 441 127.25 L 421 127.3 L 421 168 L 432.63 168" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 437.88 168 L 430.88 171.5 L 432.63 168 L 430.88 164.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="441" y="50" width="110" height="309" fill="#ff0000" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 867 127.25 L 557.37 127.25" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 552.12 127.25 L 559.12 123.75 L 557.37 127.25 L 559.12 130.75 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="867" y="50" width="110" height="309" fill="#00ffff" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="466" y="0" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 15px; margin-left: 467px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: #FF0000; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">master</div></div></div></foreignObject><text x="496" y="20" fill="#FF0000" font-family="Helvetica" font-size="18px" text-anchor="middle">master</text></switch></g><rect x="888" y="2" width="52" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 15px; margin-left: 914px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: #FF0000; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font color="#00FFFF">slave</font></div></div></div></foreignObject><text x="914" y="20" fill="#FF0000" font-family="Helvetica" font-size="18px" text-anchor="middle">slave</text></switch></g><rect x="285" y="377" width="968" height="254" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 504px; margin-left: 287px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;" data-drawio-colors="color: #1A1A1A; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div align="left">Redis集群主从复制原理</div><div align="left"><ul class="ul-list" style="box-sizing: border-box ; margin: 0.8em 0px ; padding-left: 30px ; position: relative ; color: rgb(51 , 51 , 51) ; font-family: &quot;open sans&quot; , &quot;clear sans&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif ; font-size: 16px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px"><li class="md-list-item md-focus-container" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p md-focus" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain md-expand" style="box-sizing: border-box">从服务器连接主服务器，发送SYNC命令； </span></p></li><li class="md-list-item" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">主服务器接收到SYNC命名后，开始执行BGSAVE命令生成RDB文件并使用缓冲区记录此后执行的所有写命令； </span></p></li><li class="md-list-item" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">主服务器BGSAVE执行完后，向所有从服务器发送快照文件，并在发送期间继续记录被执行的写命令； </span></p></li><li class="md-list-item" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">从服务器收到快照文件后丢弃所有旧数据，载入收到的快照； </span></p></li><li class="md-list-item" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">主服务器快照发送完毕后开始向从服务器发送缓冲区中的写命令； </span></p></li><li class="md-list-item" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">从服务器完成对快照的载入，开始接收命令请求，并执行来自主服务器缓冲区的写命令；（</span><span class="" style="box-sizing: border-box"><strong style="box-sizing: border-box"><span class="md-plain" style="box-sizing: border-box">从服务器初始化完成</span></strong></span><span class="md-plain" style="box-sizing: border-box">）</span></p></li><li class="md-list-item md-focus-container" style="box-sizing: border-box ; margin: 0px ; position: relative"><p class="md-end-block md-p md-focus" style="box-sizing: border-box ; line-height: inherit ; margin: 0px 0px 0.5rem ; position: relative"><span class="md-plain" style="box-sizing: border-box">主服务器每执行一个写命令就会向从服务器发送相同的写命令，从服务器接收并执行收到的写命令（</span><span class="" style="box-sizing: border-box"><strong style="box-sizing: border-box"><span class="md-plain" style="box-sizing: border-box">从服务器初始化完成后的操作</span></strong></span><span class="md-plain md-expand" style="box-sizing: border-box">）</span></p></li></ul><span style="color: rgb(51 , 51 , 51) ; font-family: &quot;open sans&quot; , &quot;clear sans&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif ; font-size: 16px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none"><span style="color: rgb(51 , 51 , 51) ; font-family: &quot;open sans&quot; , &quot;clear sans&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif ; font-size: 16px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none"></span></span><span style="color: rgb(51 , 51 , 51) ; font-family: &quot;open sans&quot; , &quot;clear sans&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif ; font-size: 16px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none"></span></div></div></div></div></foreignObject><text x="287" y="509" fill="#1A1A1A" font-family="Helvetica" font-size="18px">Redis集群主从复制原理...</text></switch></g><rect x="587" y="88" width="226" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 101px; margin-left: 700px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: #1A1A1A; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: all; white-space: nowrap;">1.slave向master发送SYNC</div></div></div></foreignObject><text x="700" y="106" fill="#1A1A1A" font-family="Helvetica" font-size="18px" text-anchor="middle">1.slave向master发送SYNC</text></switch></g><rect x="0" y="76" width="385" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 101px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;" data-drawio-colors="color: #1A1A1A; "><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div align="left"><font style="font-size: 14px">2.master接收到SYNC命令后，</font><font style="font-size: 14px">执行BGSAVE命令生成RDB，</font></div><div align="left"><font style="font-size: 14px">并继续使用缓存区记录伺候执行的命令<br /></font></div></div></div></div></foreignObject><text x="2" y="106" fill="#1A1A1A" font-family="Helvetica" font-size="18px">2.master接收到SYNC命令后，执行BGSAVE命令生成RDB，...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>